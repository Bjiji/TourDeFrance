<%= form_for(@ig_stage_result) do |f| %>
  <% if @ig_stage_result.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@ig_stage_result.errors.count, "error") %> prohibited this ig_stage_result from being saved:</h2>

      <ul>
      <% @ig_stage_result.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>

  <% end %>
    <table>
      <tr><td>
        <div class="field">
          <%= f.label :stage %><br />
          <% s_array = Stage.order('year', 'ordinal').all.map { |c| [c.stage_name, c.id] } %>
          <%= f.select :stage_id, s_array, {:include_blank => true} %>
        </div></td></tr>
      <tr><td>
      <tr><td>
        <div class="field">
          <div class="field">
            <%= f.label :stage_winner_s %><br />
            <%= f.text_field :stage_winner_s %>
          </div>
        </div></td></tr>
      <tr><td>
        <div class="field">
        <%= f.label :stage_winner_id %><br />
        <% if @ig_stage_result.stage != nil then c_array = RaceRunner.where(:year => @ig_stage_result.stage.year).order('lastname').all.map { |c| [c.display_fullname, c.id] } else c_array = [] end  %>
        <%= f.select :stage_winner_id, c_array, {:include_blank => true} %>
      </div></td></tr>
      <tr><td>
        <div class="field">
          <%= f.label :race_team_id %><br />
          <% if @ig_stage_result.stage != nil then c_array = RaceTeam.where(:year => @ig_stage_result.stage.year).order('label').all.map { |c| [c.label, c.id] } else c_array = [] end  %>
          <%= f.select :race_team_id, c_array, {:include_blank => true} %>
        </div></td></tr>
    </table>

    <div class="field">
      <%= f.label :leader_id %><br />
      <% if @ig_stage_result.stage != nil then c_array = RaceRunner.where(:year => @ig_stage_result.stage.year).order('lastname').all.map { |c| [c.display_fullname, c.id] } else c_array = [] end  %>
      <%= f.select :leader_id, c_array, {:include_blank => true} %>
    </div>
    <div class="field">
      <%= f.label :sprinter_id %><br />
      <% if @ig_stage_result.stage != nil then c_array = RaceRunner.where(:year => @ig_stage_result.stage.year).order('lastname').all.map { |c| [c.display_fullname, c.id] } else c_array = [] end  %>
      <%= f.select :sprinter_id, c_array, {:include_blank => true} %>
    </div>
    <div class="field">
      <%= f.label :climber_id %><br />
      <% if @ig_stage_result.stage != nil then c_array = RaceRunner.where(:year => @ig_stage_result.stage.year).order('lastname').all.map { |c| [c.display_fullname, c.id] } else c_array = [] end  %>
      <%= f.select :climber_id, c_array, {:include_blank => true} %>
    </div>
    <div class="field">
      <%= f.label :young_id %><br />
      <% if @ig_stage_result.stage != nil then c_array = RaceRunner.where(:year => @ig_stage_result.stage.year).order('lastname').all.map { |c| [c.display_fullname, c.id] } else c_array = [] end  %>
      <%= f.select :young_id, c_array, {:include_blank => true} %>
    </div>
  <div class="actions">

    <%= f.submit %>

  </div>
<% end %>
