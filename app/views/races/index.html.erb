<script>
$(document).ready(function() {
 $('#races').dataTable({
     "sPaginationType": "full_numbers",
     "iDisplayLength": 50,
     "aaSorting": [[ 0, "desc" ]],
     "aoColumns" : [
         {"asSorting": [ "desc", "asc" ], "bSortable": true, "bSearchable": true },
         {"bSortable": true, "bSearchable": false },
         {"bSortable": true, "bSearchable": false },
         {"bSortable": true, "bSearchable": true },
         {"bSortable": true, "bSearchable": true, "sType": "num-html"},
         {"bSortable": false, "bSearchable": false },
         {"bSortable": false, "bSearchable": false },
         {"bSortable": false, "bSearchable": false },
         {"bSortable": false, "bSearchable": false }
     ]

 });
} );
</script>

<h1>Les tours de France</h1>

<table class="display" id="races">
  <thead>
  <tr>
    <th>Ann√©e</th>
    <th>Distance</th>
    <th>Vitesse</th>
    <th>Vainqueur</th>
    <th>Participants</th>
    <th>Prime au vainqueur</th>
    <th>Total des primes</th>
    <th></th>
    <th></th>
  </tr>
  </thead>

<tbody>
<% @races.each do |race| %>
  <tr>
    <td><%= race.year %></td>
    <td><%= race.distance %></td>
    <td><%= race.averageSpeed %></td>
    <td><%= if (race.cyclist != nil) then link_to race.cyclist.firstname + ' ' + race.cyclist.lastname, cyclist_path(race.cyclist) end  %></td>
    <td><%= if (true) then link_to race.cyclists.count, cyclists_path(:race => race) else 0 end %></td>
    <td><%= race.winnerPrize %></td>
    <td><%= race.poolPrize %></td>
    <td><%= link_to 'Voir', race %></td>
    <td><%= link_to 'Editer', edit_race_path(race) %></td>
  </tr>
<% end %>
</tbody>
</table>

<br />

<%= link_to 'New Race', new_race_path %>
